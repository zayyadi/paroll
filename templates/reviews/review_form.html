{% extends "base_tailwind.html" %}
{% load crispy_forms_tags %}

{% block page_header %}Add Review{% endblock %}

{% block content %}
<div class="bg-white shadow-md rounded-lg p-6">
  <form method="post" class="space-y-6">
    {% csrf_token %}
    <div class="space-y-4">
      {{ form.self_assessment|as_crispy_field }}
    </div>
    <hr>
    <h3 class="text-xl font-semibold text-gray-800 mb-4">Ratings</h3>
    {{ rating_formset.management_form }}
    <div class="space-y-8">
      {% for form in rating_formset %}
        <div class="p-4 border rounded-lg">
          <h4 class="text-lg font-semibold text-gray-700">{{ form.instance.metric.name }}</h4>
          <p class="text-sm text-gray-500 mb-2">{{ form.instance.metric.description }}</p>
          {{ form.rating|as_crispy_field }}
          {{ form.comments|as_crispy_field }}
          {{ form.id }}
          {{ form.metric }}
        </div>
      {% endfor %}
    </div>
    <div class="flex justify-end pt-6">
      <button type="submit" class="bg-primary text-white px-6 py-2 rounded-lg hover:bg-opacity-90">Submit Review</button>
    </div>
  </form>
</div>
{% endblock %}