{% extends "base_new.html" %}

{% load static %}
{% load custom_tags %}

{% block title %}Notification Type Preferences{% endblock %}

{% block page_header %}Notification Type Preferences{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto">
    {% if messages %}
        {% for message in messages %}
            <div class="mb-4 p-4 rounded-md flex items-start
                {% if message.tags == 'success' %}bg-success-50 text-success-800 border border-success-200
                {% elif message.tags == 'error' %}bg-danger-50 text-danger-800 border border-danger-200
                {% elif message.tags == 'warning' %}bg-warning-50 text-warning-800 border border-warning-200
                {% else %}bg-primary-50 text-primary-800 border border-primary-200{% endif %}">
                <i data-lucide="{% if message.tags == 'success' %}check-circle{% elif message.tags == 'error' %}alert-circle{% elif message.tags == 'warning' %}alert-triangle{% else %}info{% endif %}" 
                   class="h-5 w-5 mr-3 flex-shrink-0"></i>
                <span class="text-sm">{{ message }}</span>
            </div>
        {% endfor %}
    {% endif %}

    <form method="post" action="{% url 'payroll:notification_type_preferences' %}">
        {% csrf_token %}

        <!-- Introduction -->
        <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6">
            <div class="flex items-start space-x-3">
                <i data-lucide="info" class="h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"></i>
                <div>
                    <h3 class="text-sm font-medium text-blue-900 dark:text-blue-100">Type-Specific Preferences</h3>
                    <p class="text-sm text-blue-700 dark:text-blue-300 mt-1">
                        Configure notification settings for each notification type. These settings override your global preferences.
                    </p>
                </div>
            </div>
        </div>

        <!-- Notification Types -->
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow border border-gray-200 dark:border-gray-700">
            <div class="px-6 py-4 border-b border-gray-200 dark:border-gray-700">
                <div class="flex items-center justify-between">
                    <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Notification Types</h2>
                    <button type="button" onclick="toggleAllChannels(true)" class="text-sm text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300">
                        Enable All
                    </button>
                    <button type="button" onclick="toggleAllChannels(false)" class="text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 ml-4">
                        Disable All
                    </button>
                </div>
            </div>

            <div class="divide-y divide-gray-200 dark:divide-gray-700">
                <!-- Leave Notifications -->
                <div class="px-6 py-4">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 rounded-lg bg-green-100 dark:bg-green-900/50 flex items-center justify-center">
                            <i data-lucide="calendar" class="h-5 w-5 text-green-600 dark:text-green-400"></i>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Leave Notifications</h3>
                            <p class="text-xs text-gray-500 dark:text-gray-400">Leave requests, approvals, and reminders</p>
                        </div>
                    </div>
                    
                    <div class="ml-13 overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead>
                                <tr>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Type</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">In-App</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Email</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Push</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">SMS</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Priority</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">Leave Approved</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_APPROVED][in_app]" 
                                               {% if type_preferences.LEAVE_APPROVED.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_APPROVED][email]" 
                                               {% if type_preferences.LEAVE_APPROVED.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_APPROVED][push]" 
                                               {% if type_preferences.LEAVE_APPROVED.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_APPROVED][sms]" 
                                               {% if type_preferences.LEAVE_APPROVED.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[LEAVE_APPROVED][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.LEAVE_APPROVED.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.LEAVE_APPROVED.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.LEAVE_APPROVED.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.LEAVE_APPROVED.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">Leave Rejected</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_REJECTED][in_app]" 
                                               {% if type_preferences.LEAVE_REJECTED.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_REJECTED][email]" 
                                               {% if type_preferences.LEAVE_REJECTED.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_REJECTED][push]" 
                                               {% if type_preferences.LEAVE_REJECTED.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_REJECTED][sms]" 
                                               {% if type_preferences.LEAVE_REJECTED.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[LEAVE_REJECTED][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.LEAVE_REJECTED.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.LEAVE_REJECTED.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.LEAVE_REJECTED.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.LEAVE_REJECTED.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">Leave Pending</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_PENDING][in_app]" 
                                               {% if type_preferences.LEAVE_PENDING.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_PENDING][email]" 
                                               {% if type_preferences.LEAVE_PENDING.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_PENDING][push]" 
                                               {% if type_preferences.LEAVE_PENDING.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[LEAVE_PENDING][sms]" 
                                               {% if type_preferences.LEAVE_PENDING.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[LEAVE_PENDING][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.LEAVE_PENDING.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.LEAVE_PENDING.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.LEAVE_PENDING.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.LEAVE_PENDING.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- IOU Notifications -->
                <div class="px-6 py-4">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 rounded-lg bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center">
                            <i data-lucide="dollar-sign" class="h-5 w-5 text-blue-600 dark:text-blue-400"></i>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-900 dark:text-white">IOU Notifications</h3>
                            <p class="text-xs text-gray-500 dark:text-gray-400">IOU requests, approvals, and due dates</p>
                        </div>
                    </div>
                    
                    <div class="ml-13 overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead>
                                <tr>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Type</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">In-App</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Email</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Push</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">SMS</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Priority</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">IOU Approved</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_APPROVED][in_app]" 
                                               {% if type_preferences.IOU_APPROVED.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_APPROVED][email]" 
                                               {% if type_preferences.IOU_APPROVED.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_APPROVED][push]" 
                                               {% if type_preferences.IOU_APPROVED.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_APPROVED][sms]" 
                                               {% if type_preferences.IOU_APPROVED.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[IOU_APPROVED][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.IOU_APPROVED.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.IOU_APPROVED.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.IOU_APPROVED.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.IOU_APPROVED.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">IOU Rejected</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_REJECTED][in_app]" 
                                               {% if type_preferences.IOU_REJECTED.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_REJECTED][email]" 
                                               {% if type_preferences.IOU_REJECTED.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_REJECTED][push]" 
                                               {% if type_preferences.IOU_REJECTED.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_REJECTED][sms]" 
                                               {% if type_preferences.IOU_REJECTED.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[IOU_REJECTED][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.IOU_REJECTED.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.IOU_REJECTED.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.IOU_REJECTED.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.IOU_REJECTED.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">IOU Payment Due</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_DUE][in_app]" 
                                               {% if type_preferences.IOU_DUE.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_DUE][email]" 
                                               {% if type_preferences.IOU_DUE.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_DUE][push]" 
                                               {% if type_preferences.IOU_DUE.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[IOU_DUE][sms]" 
                                               {% if type_preferences.IOU_DUE.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[IOU_DUE][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.IOU_DUE.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.IOU_DUE.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.IOU_DUE.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.IOU_DUE.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Payroll Notifications -->
                <div class="px-6 py-4">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 rounded-lg bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center">
                            <i data-lucide="banknote" class="h-5 w-5 text-purple-600 dark:text-purple-400"></i>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Payroll Notifications</h3>
                            <p class="text-xs text-gray-500 dark:text-gray-400">Payslips, payroll processing, and salary disbursement</p>
                        </div>
                    </div>
                    
                    <div class="ml-13 overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead>
                                <tr>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Type</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">In-App</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Email</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Push</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">SMS</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Priority</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">Payslip Available</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PAYSLIP_AVAILABLE][in_app]" 
                                               {% if type_preferences.PAYSLIP_AVAILABLE.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PAYSLIP_AVAILABLE][email]" 
                                               {% if type_preferences.PAYSLIP_AVAILABLE.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PAYSLIP_AVAILABLE][push]" 
                                               {% if type_preferences.PAYSLIP_AVAILABLE.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PAYSLIP_AVAILABLE][sms]" 
                                               {% if type_preferences.PAYSLIP_AVAILABLE.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[PAYSLIP_AVAILABLE][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.PAYSLIP_AVAILABLE.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.PAYSLIP_AVAILABLE.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.PAYSLIP_AVAILABLE.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.PAYSLIP_AVAILABLE.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">Payroll Processed</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PAYROLL_PROCESSED][in_app]" 
                                               {% if type_preferences.PAYROLL_PROCESSED.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PAYROLL_PROCESSED][email]" 
                                               {% if type_preferences.PAYROLL_PROCESSED.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PAYROLL_PROCESSED][push]" 
                                               {% if type_preferences.PAYROLL_PROCESSED.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PAYROLL_PROCESSED][sms]" 
                                               {% if type_preferences.PAYROLL_PROCESSED.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[PAYROLL_PROCESSED][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.PAYROLL_PROCESSED.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.PAYROLL_PROCESSED.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.PAYROLL_PROCESSED.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.PAYROLL_PROCESSED.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Appraisal Notifications -->
                <div class="px-6 py-4">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 rounded-lg bg-yellow-100 dark:bg-yellow-900/50 flex items-center justify-center">
                            <i data-lucide="star" class="h-5 w-5 text-yellow-600 dark:text-yellow-400"></i>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-900 dark:text-white">Appraisal Notifications</h3>
                            <p class="text-xs text-gray-500 dark:text-gray-400">Performance reviews and reminders</p>
                        </div>
                    </div>
                    
                    <div class="ml-13 overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead>
                                <tr>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Type</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">In-App</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Email</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Push</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">SMS</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Priority</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">Appraisal Assigned</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[APPRAISAL_ASSIGNED][in_app]" 
                                               {% if type_preferences.APPRAISAL_ASSIGNED.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[APPRAISAL_ASSIGNED][email]" 
                                               {% if type_preferences.APPRAISAL_ASSIGNED.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[APPRAISAL_ASSIGNED][push]" 
                                               {% if type_preferences.APPRAISAL_ASSIGNED.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[APPRAISAL_ASSIGNED][sms]" 
                                               {% if type_preferences.APPRAISAL_ASSIGNED.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[APPRAISAL_ASSIGNED][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.APPRAISAL_ASSIGNED.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.APPRAISAL_ASSIGNED.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.APPRAISAL_ASSIGNED.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.APPRAISAL_ASSIGNED.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">Appraisal Reminder</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[APPRAISAL_REMINDER][in_app]" 
                                               {% if type_preferences.APPRAISAL_REMINDER.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[APPRAISAL_REMINDER][email]" 
                                               {% if type_preferences.APPRAISAL_REMINDER.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[APPRAISAL_REMINDER][push]" 
                                               {% if type_preferences.APPRAISAL_REMINDER.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[APPRAISAL_REMINDER][sms]" 
                                               {% if type_preferences.APPRAISAL_REMINDER.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[APPRAISAL_REMINDER][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.APPRAISAL_REMINDER.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.APPRAISAL_REMINDER.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.APPRAISAL_REMINDER.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.APPRAISAL_REMINDER.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- System Notifications -->
                <div class="px-6 py-4">
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 rounded-lg bg-gray-100 dark:bg-gray-900/50 flex items-center justify-center">
                            <i data-lucide="settings" class="h-5 w-5 text-gray-600 dark:text-gray-400"></i>
                        </div>
                        <div>
                            <h3 class="text-sm font-semibold text-gray-900 dark:text-white">System Notifications</h3>
                            <p class="text-xs text-gray-500 dark:text-gray-400">Account updates, security alerts, and system messages</p>
                        </div>
                    </div>
                    
                    <div class="ml-13 overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                            <thead>
                                <tr>
                                    <th class="px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Type</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">In-App</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Email</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Push</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">SMS</th>
                                    <th class="px-3 py-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Priority</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">Profile Updated</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PROFILE_UPDATED][in_app]" 
                                               {% if type_preferences.PROFILE_UPDATED.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PROFILE_UPDATED][email]" 
                                               {% if type_preferences.PROFILE_UPDATED.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PROFILE_UPDATED][push]" 
                                               {% if type_preferences.PROFILE_UPDATED.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PROFILE_UPDATED][sms]" 
                                               {% if type_preferences.PROFILE_UPDATED.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[PROFILE_UPDATED][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.PROFILE_UPDATED.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.PROFILE_UPDATED.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.PROFILE_UPDATED.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.PROFILE_UPDATED.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-3 py-2 text-sm text-gray-900 dark:text-white">Password Changed</td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PASSWORD_CHANGED][in_app]" 
                                               {% if type_preferences.PASSWORD_CHANGED.in_app %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PASSWORD_CHANGED][email]" 
                                               {% if type_preferences.PASSWORD_CHANGED.email %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PASSWORD_CHANGED][push]" 
                                               {% if type_preferences.PASSWORD_CHANGED.push %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <input type="checkbox" name="type_preferences[PASSWORD_CHANGED][sms]" 
                                               {% if type_preferences.PASSWORD_CHANGED.sms %}checked{% endif %}>
                                    </td>
                                    <td class="px-3 py-2 text-center">
                                        <select name="type_preferences[PASSWORD_CHANGED][priority]" class="text-xs border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700 dark:text-white">
                                            <option value="LOW" {% if type_preferences.PASSWORD_CHANGED.priority == 'LOW' %}selected{% endif %}>Low</option>
                                            <option value="MEDIUM" {% if type_preferences.PASSWORD_CHANGED.priority == 'MEDIUM' %}selected{% endif %}>Medium</option>
                                            <option value="HIGH" {% if type_preferences.PASSWORD_CHANGED.priority == 'HIGH' %}selected{% endif %}>High</option>
                                            <option value="CRITICAL" {% if type_preferences.PASSWORD_CHANGED.priority == 'CRITICAL' %}selected{% endif %}>Critical</option>
                                        </select>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Save Button -->
        <div class="mt-6 flex justify-end space-x-3">
            <a href="{% url 'payroll:notification_preferences' %}" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600">
                Back to Global Preferences
            </a>
            <button type="submit" class="px-4 py-2 border border-transparent rounded-md text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                <i data-lucide="save" class="h-4 w-4 inline mr-1.5"></i>
                Save Type Preferences
            </button>
        </div>
    </form>
</div>

<script>
function toggleAllChannels(enable) {
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(checkbox => {
        checkbox.checked = enable;
    });
}

document.addEventListener('DOMContentLoaded', function() {
    // Initialize Lucide icons
    if (typeof lucide !== 'undefined') {
        lucide.createIcons();
    }
});
</script>
{% endblock %}
